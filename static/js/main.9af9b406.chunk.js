(this["webpackJsonpphase-1"]=this["webpackJsonpphase-1"]||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(2),c=n(20),s=n.n(c),i=n(3),l=n(4),o=n(11),u=n.n(o),d=n(21),j=n(22),b=n.n(j),m=n(24),h=n(23),f=function(e){return Object(r.jsx)("button",Object(i.a)(Object(i.a)({},e),{},{className:"btn btn-primary "+e.className,children:e.children}))},x=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=function(){window.scrollY>=100?c(!0):c(!1)};return document.addEventListener("scroll",e),function(){return document.removeEventListener("scroll",e)}}),[c]),Object(r.jsx)(f,{onClick:function(){return window.scrollTo({top:0,behavior:"smooth"})},className:"bottom-10 right-5 fixed p-4",style:n?{visibility:"visible",opacity:1}:{visibility:"hidden",opacity:0},children:Object(r.jsx)(h.a,{color:"white"})})},p=function(e){var t=e.children;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(v,{}),Object(r.jsx)("div",{className:"min-h-.8screen px-5",children:t}),Object(r.jsx)(x,{}),Object(r.jsx)(O,{})]})},O=function(){return Object(r.jsxs)("footer",{className:"footer",children:["Made with \ud83d\udc96 by"," ",Object(r.jsx)("a",{className:"hover:text-purple-500 hover:shadow-lg ring-purple-300 font-bold text-purple-700",href:"http://github.com/daviesesiro",target:"_blank",rel:"noopener noreferrer",children:"Davies Ojurere"})," ","~ 2021"]})},v=function(){return Object(r.jsx)("header",{className:"p-3 bg-purple-900",children:Object(r.jsx)("h1",{className:"text-2xl font-bold text-center text-white",children:"Enye Challenge Phase 1"})})},g=function(e){var t=e.onChange;return Object(r.jsx)("div",{className:"flex justify-center mt-5",children:Object(r.jsx)("input",{onChange:t,className:"search",type:"search",placeholder:"Search Patient...",name:"patient-name"})})},N=function(e){var t=e.label,n=e.id,a=e.className,c=e.onChange,s=e.value;return Object(r.jsxs)("div",{className:"inline "+a,children:[Object(r.jsx)("input",{onChange:c,className:"w-5 h-5 align-middle",type:"checkbox",id:n,name:t,value:s}),Object(r.jsx)("label",{htmlFor:n,className:"ml-2 align-middle",children:t})]})},y=function(e){var t=e.handleCheckBoxChange;return Object(r.jsx)("div",{children:[{label:"Male",value:"Male",id:"male"},{label:"Female",value:"Female",id:"female"},{label:"Prefer to Skip",value:"Prefer to Skip",id:"prefer-to-skip"}].map((function(e,n){return Object(r.jsx)(N,{value:e.value,id:e.id,onChange:t,label:e.label,className:"mr-3"},"checkbox-"+n)}))})},w=function(e){var t=e.cursor,n=e.nextPage,a=e.prevPage,c=e.data,s=e.scroll,i=e.pageNumber,l=function(e){s&&window.scrollTo({top:document.getElementById("card-list").offsetTop-50,behavior:"smooth"}),e()};return Object(r.jsxs)("div",{className:" container mx-auto mt-10 text-center",children:[Object(r.jsx)(f,{className:"mr-4",disabled:t<=0,onClick:function(){return l(a)},children:"Back"}),Object(r.jsx)("span",{className:" mr-4",children:i}),Object(r.jsx)(f,{disabled:!c.hasMore,onClick:function(){return l(n)},children:"Next"})]})},C=function(e){var t=e.handleChange;return Object(r.jsxs)("select",{defaultValue:"Choose an Option",defaultChecked:!0,onChange:t,name:"payment-method",className:"focus:ring-2 focus:outline-none ring-opacity-50 ring-purple-700 px-4 py-1 mt-1 border border-gray-400 rounded-md",id:"payment-method",children:[Object(r.jsx)("option",{children:"Choose an Option"}),Object(r.jsx)("option",{value:"cc",children:"Credit Card "}),Object(r.jsx)("option",{value:"money order",children:"Money Order"}),Object(r.jsx)("option",{value:"paypal",children:"Paypal"}),Object(r.jsx)("option",{value:"check",children:"Check"})]})},k=n(25);var M={cc:"Credit Card","money order":"Money Order",paypal:"Paypay",check:"Check"},P=n(8),E=function(e,t){var n=.5*window.innerWidth,r=.5*window.innerHeight,a=.5*e.clientWidth,c=.5*e.clientHeight,s=n-e.offsetLeft-a,i=r-(e.offsetTop-document.scrollingElement.scrollTop)-c;e.style.zIndex="50",e.style.transform="translate(".concat(s,"px, ").concat(i,"px)"),t&&t(i)},F=function(e){var t=e.name,n=e.value;n="LastLogin"===t?new Date(n).toDateString():n;var a="URL"===t||"DomainName"===t?Object(r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"font-bold text-purple-600",href:n,children:n}):Object(r.jsx)("span",{children:n});return Object(r.jsxs)("div",{className:"sm:block sm:py-1 flex flex-col items-center",children:[Object(r.jsx)(P.b,{className:" sm:inline hidden mr-4 text-purple-500"}),Object(r.jsxs)("span",{className:"sm:mt-0 mt-2 font-bold text-gray-500",children:[t,": "]}),a]})},S=function(e){var t=e.profile,n=Object(a.useState)(!1),c=Object(l.a)(n,2),s=c[0],i=c[1],o=Object(a.useRef)(null),u=function(e){Math.abs(e)>400&&i(!1)};return Object(a.useEffect)((function(){var e=function(){E(o.current,u)};return s?(E(o.current),window.addEventListener("scroll",e)):o.current.style.transform="translate(0)",function(){return window.removeEventListener("scroll",e)}}),[s]),Object(r.jsxs)(r.Fragment,{children:[s&&Object(r.jsx)("button",{onClick:function(){return i(!1)},className:"opacity-60 fixed inset-0 z-40 w-screen bg-black"}),Object(r.jsxs)("div",{ref:o,className:"".concat(s?"show":""," group card"),children:[s&&Object(r.jsx)("button",{className:"top-5 left-5 absolute",onClick:function(){return i(!1)},children:Object(r.jsx)(P.c,{size:30,className:"text-red-700"})}),Object(r.jsx)("h1",{className:"text-xl text-center",children:t.FullName}),Object(r.jsxs)("div",{className:"sm:px-5 px-2 mt-8 font-light text-gray-300",children:[Object(r.jsx)(F,{value:t.Email,name:"Email"}),Object(r.jsx)(F,{value:t.Gender,name:"Gender"}),Object(r.jsx)(F,{value:M[t.PaymentMethod],name:"Payment Method"}),s&&Object.entries(t).filter((function(e){var t=Object(l.a)(e,2),n=t[0];return t[1],!["Gender","PaymentMethod","Email","FirstName","LastName","FullName"].includes(n)})).map((function(e){var n=Object(l.a)(e,2),a=n[0],c=n[1];return Object(r.jsx)(F,{value:c.toString(),name:a},t.Email+"-atr-"+a)}))]}),!s&&Object(r.jsxs)("button",{onClick:function(){return i(!0)},className:"group-hover:text-purple-50 group-hover:bg-purple-700 btn btn-secondary block mx-auto mt-8",children:["View More ",Object(r.jsx)(P.a,{className:"inline"})]})]})]})},L=function(e){var t=e.paginatedProfiles;return Object(r.jsx)("div",{id:"card-list",className:"card-list mt-10",children:t.data.map((function(e){return Object(r.jsx)(S,{profile:e},e.Email)}))})},z=function(){var e=function(){var e=Object(a.useState)({isFetching:!0}),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){!function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("https://api.enye.tech/v1/challenge/records");case 3:(t=e.sent).data.records.profiles=t.data.records.profiles.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{FullName:"".concat(e.FirstName," ").concat(e.LastName)})})),r((function(e){return Object(i.a)(Object(i.a)({},e),{},{data:t.data,isFetching:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response),r((function(t){return Object(i.a)(Object(i.a)({},t),{},{error:e.t0,isFetching:!1})}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[r]),Object(i.a)({},n)}(),t=e.data,n=e.isFetching,c=e.error,s=Object(a.useState)(""),o=Object(l.a)(s,2),j=o[0],h=o[1],f=Object(a.useState)(0),x=Object(l.a)(f,2),O=x[0],v=x[1],N=Object(a.useState)(1),M=Object(l.a)(N,2),P=M[0],E=M[1],F=Object(a.useState)({genders:[],paymentMethod:""}),S=Object(l.a)(F,2),z=S[0],B=S[1],G=Object(a.useState)({data:[],hasMore:!1}),T=Object(l.a)(G,2),D=T[0],I=T[1],H=function(){E((function(e){return e-1})),v((function(e){return e-20}))},J=function(){E((function(e){return e+1})),v((function(e){return e+20}))};Object(a.useEffect)((function(){v(0)}),[j,z,v]),Object(a.useEffect)((function(){if(t){var e=function(e,t,n){var r=[];return r=""===e?t.records.profiles:new k.a(t.records.profiles,{keys:["FullName"],threshold:.4,shouldSort:!0}).search(e).map((function(e){return e.item})),n.genders.length>0&&(r=r.filter((function(e){return n.genders.includes(e.Gender.toLowerCase())}))),["Choose an Option",""].includes(n.paymentMethod)||(r=r.filter((function(e){return e.PaymentMethod===n.paymentMethod}))),r}(j,t,z);I(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.min(t,e.size);var n=Math.min(t+20+1,e.size),r=e.records.profiles.slice(t,n).slice(0,20),a=20===r.length;return{data:r,hasMore:a}}(Object(i.a)(Object(i.a)({},t),{},{records:{profiles:e}}),O))}}),[t,O,I,j,z]);return Object(r.jsxs)(p,{children:[Object(r.jsx)(g,{onChange:function(e){return h(e.target.value)}}),Object(r.jsxs)("div",{className:"max-w-md mx-auto",children:[Object(r.jsxs)("div",{className:"sm:flex-row flex flex-col items-center mt-2",children:[Object(r.jsx)("span",{className:"md:inline block mr-5 text-gray-600",children:"Gender:"}),Object(r.jsx)(y,{handleCheckBoxChange:function(e){var t=e.target.value.toLowerCase();B((function(e){var n=e.genders;return n.includes(t)?n=n.filter((function(e){return e!==t})):n.push(t),Object(i.a)(Object(i.a)({},e),{},{genders:n})}))}})]}),Object(r.jsxs)("div",{className:"sm:flex-row flex flex-col items-center mt-2",children:[Object(r.jsx)("span",{className:"mr-2 text-gray-600",children:"Payment Method:"}),Object(r.jsx)(C,{handleChange:function(e){B((function(t){return Object(i.a)(Object(i.a)({},t),{},{paymentMethod:e.target.value})}))}})]})]}),c&&Object(r.jsx)("div",{className:"flex items-center justify-center h-64",children:Object(r.jsx)("h1",{className:"text-4xl font-bold text-red-600",children:null===c||void 0===c?void 0:c.message})}),n?Object(r.jsx)("div",{className:"flex items-center justify-center min-h-.8screen text-white",children:Object(r.jsx)(m.a,{color:"black",size:50,className:"animate-spin"})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w,{cursor:O,setCursor:v,data:D,nextPage:J,prevPage:H,pageNumber:P}),Object(r.jsx)(L,{paginatedProfiles:D}),Object(r.jsx)(w,{cursor:O,setCursor:v,data:D,nextPage:J,prevPage:H,scroll:!0,pageNumber:P})]})]})};n(50);s.a.render(Object(r.jsx)(z,{}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.9af9b406.chunk.js.map